# 固件

我们使用单片机（MCU）充当机器人主体和智能手机之间的桥梁。 我们提供带有ATmega328P微控制器的Arduino Nano的 [固件](openbot_v1_nano/openbot_v1_nano.ino) 。

## 单片机的需求

您可以使用具有以下功能的任何其他MCU：
- 1个USB到TTL串行（与智能手机通信）
- 4个PWM输出（控制电机）
- 1个模拟ff引脚用于电池监控
- 2个用于速度传感器的数字引脚
- 1个用于超声波传感器的数字引脚（可选）
- 2个用于LED指示灯的数字引脚（可选）

## 特性
MCU的主要任务是处理车辆的底层控制，并提供来自底层车载传感器的读数。 MCU通过串行连接接收车辆控制和指示信号。 它将控制转换为电机控制器的PWM信号，并根据指示器信号切换LED。 Arduino程序还通过计算左右前轮上光学传感器的中断来跟踪轮盘旋转。 它通过分压器电路上测量值的缩放移动平均值来计算电池电压。 它还可以通过选配的超声波传感器测量到汽车前方障碍物的距离。 这些测量值通过串口发送回Android应用程序。

## 依赖
如果要使用超声波传感器，需要安装[NewPing](https://playground.arduino.cc/Code/NewPing)库。

```
Tools
└─── Manage Libraries
